Ссылка на доску миро: https://miro.com/app/board/uXjVItFez8c=/?share_link_id=84429334733
схемы продублированы в картинках в этой же директории

Где нужно поменять с синхронных на асинхронные
- COMM-40 COMM-50 COMM-80 - заменяем на асинхронные (будут события task solved, task created, task not solved) мгновенного ответа не надо, на события реагирует несколько обработчиков (например для task solved). Тут будет большое количество вызовов, с асинхронным взаимодействием лучше заскейлится
- COMM-90, COMM-10, COMM-20 - тут не требуется немедленный ответ, асинхронность уменьшит связность и повысит надежность системы. У бизнеса была проблема когда падает сервис заданий и бонусов, при этом кандидаты не могут выполнять задания.



**КОММУНИКАЦИИ**  
  
| Номер<br>связи | Как связь сделана на <br>текущий момент | Какая теперь<br>будет связь                           | Связь после второго урока                             | Проблемы бизнеса<br>которые <br>потенциално<br>решатся                            | Почему <br>связь необходимо <br>изменить                                                                                                                                                                                                                                                                    |
| -------------- | --------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- | --------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [COMM- 010]    | HTTP-вызов                              | останется такой же                                    | Ее не будет                                           |                                                                                   | Сервису найма не нужна информация о менеджере.<br>Уменьшаем связность между сервисами                                                                                                                                                                                                                       |
| [COMM- 020]    | HTTP-вызов                              | Асинхронное событие о назначении нового задания       | Асинхронное событие о назначении нового задания       | [Problem-080]                                                                     | Сервис найма в новом способе не зависит от работоспособности сервиса заданий. + назначенные задания можно выгребать батчами если использовать кафку - поможет с ростом нагрузки                                                                                                                             |
| [COMM- 030]    | HTTP-вызов                              | Асинхронное событие о том что задание пора переделать | HTTP-вызов                                            | [Problem-020]                                                                     | Бизнес требует чтобы задание обновлялось как можно скорее чтобы кандидаты не читерили систему. поэтому синхронный возов                                                                                                                                                                                     |
| [COMM- 040]    | HTTP-вызов                              | Асинхронное событие "Задача решена" + рейтинг задания | Асинхронное событие "Задача решена" + рейтинг задания | [Problem-030]<br>[Problem-080]<br>[Problem-040]<br>[Problem-050]<br>[Problem-070] | Нужно доставлять рейтинг вместе с сообщением о решении задачи чтобы рейтинг был актуален на момент решения для правильного начисления бонусов.<br><br>Асинхронные задачи например через кафку можно выгребать батчами что поможет сукорить начисление бонусов (Для [COMM- 050], [COMM- 080] тоже актуально) |
| [COMM- 050]    | HTTP-вызов                              | Асинхронное событие "Задача не решена"                | Асинхронное событие "Задача не решена"                | [Problem-080]<br>[Problem-040]<br>[Problem-050]<br>[Problem-070]                  | Отвяжет сервис найма от сервиса бонусов:<br>- падение сервиса бонусов не скажется на работе сервиса найма<br>- знания о начислениях не будут течь в сервис найма (Так же эти аргументы актуальны для связи [COMM- 040])                                                                                     |
| [COMM- 060]    | Асинхронное событие                     | Эту связь нужно убрать                                | Эту связь нужно убрать                                | [Problem-030]                                                                     | Рейтинг может доставиться позже чем событие/вызов зачисления бонусов. Поэтому бонусы за часть заданий будут учтены неверно                                                                                                                                                                                  |
| [COMM- 070]    | HTTP-вызов                              | Останется такой же                                    | Останется такой же                                    |                                                                                   | Подразумеваю что получение инфы о менеджере вызывается не часто и по необходимости, у бизнеса нет потребности часто менять инфу о менеджере, поэтому сервис бонусов может просто хранить у себя или кэшировать эту инфу. Не вижу тут смысла усложнять                                                       |
| [COMM- 080]    | HTTP-вызов                              | Асинхронное событие "Создана новая задача"            | Асинхронное событие "Создана новая задача"            | [Problem-080]                                                                     | Отвязывает сервис заданий от сервиса выплат, падение сервиса выплат не сможет парализовать работу сервиса задач. Делает систему более надежной                                                                                                                                                              |
| [COMM- 090]    | HTTP-вызов                              | Асинхронное событие "Новый учитель в системе"         | Асинхронное событие "Новый учитель в системе"         | [Problem-080]                                                                     | В целом думаю тут можно было бы и HTTP вызов оставить. Но тогда падение сервиса заданий сможет в этом месте повлиять на работу сервиса найма, а такой запрос бизнеса есть, поэтому можно поменять                                                                                                           |


